name: Update README with IPTV Player

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Manual Checkout and Update
        run: |
          # –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤—Ä—É—á–Ω—É—é –±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —ç–∫—à–µ–Ω–æ–≤
          git clone https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repository }}.git .
          
          # –§–æ—Ä–º–∏—Ä—É–µ–º README
          echo "# üì∫ IPTV MIR 2026" > README.md
          echo "" >> README.md
          echo "### –ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∏–∂–µ:" >> README.md
          echo "" >> README.md
          
          # –í—Å—Ç–∞–≤–∫–∞ –ø–ª–µ–µ—Ä–∞
          echo '<iframe src="https://iptvru2026.github.io/IPTVMIR/full.html" width="100%" height="600px" frameborder="0"></iframe>' >> README.md
          
          echo "" >> README.md
          echo '[![–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç](https://img.shields.io/badge/–°–º–æ—Ç—Ä–µ—Ç—å-–ù–∞_–ø–æ–ª–Ω—ã–π_—ç–∫—Ä–∞–Ω-blue?style=for-the-badge&logo=googlechrome&logoColor=white)](https://iptvru2026.github.io/IPTVMIR/full.html)' >> README.md
          echo "" >> README.md
          echo "---" >> README.md
          echo "### ‚ÑπÔ∏è –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–ª–∏–∑–µ" >> README.md
          echo "–î–∞–Ω–Ω—ã–π —Ä–µ–ª–∏–∑ **IPTV MIR** –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤, –ø–æ–¥–¥–µ—Ä–∂–∫—É –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –ø–ª–µ–µ—Ä–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤." >> README.md

          # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –ø—É—à
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          git commit -m "Update README without external actions" || exit 0
          git push origin main
