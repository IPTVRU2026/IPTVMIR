name: Update IPTV MIR 2026

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Generate Files
        run: |
          # 1. –°–û–ó–î–ê–ï–ú INDEX.HTML (–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–ª–µ–µ—Ä–∞ —Å JS)
          # –≠—Ç–æ —Ç–æ, —á—Ç–æ —É–≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ —Å—Å—ã–ª–∫–µ. –ó–¥–µ—Å—å JS —Ä–∞–∑—Ä–µ—à–µ–Ω!
          cat <<EOF > index.html
          <!DOCTYPE html>
          <html lang="ru">
          <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>IPTV MIR 2026 - Player</title>
              <style>
                  body { margin: 0; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif; }
                  .loader { color: white; text-align: center; }
                  /* –°—Ç–∏–ª—å –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –æ–∫–Ω–∞ –ø–ª–µ–µ—Ä–∞ */
                  iframe { width: 100%; height: 100vh; border: none; }
              </style>
          </head>
          <body>
              <iframe src="full.html"></iframe>
          </body>
          </html>
          EOF

          # 2. –û–ë–ù–û–í–õ–Ø–ï–ú README.MD (–ö—Ä–∞—Å–∏–≤–∞—è –≤–∏—Ç—Ä–∏–Ω–∞)
          echo "# üì∫ IPTV MIR 2026" > README.md
          echo "" >> README.md
          echo "![Status](https://img.shields.io/badge/–°—Ç–∞—Ç—É—Å-–í_–≠–§–ò–†–ï-brightgreen?style=for-the-badge)" >> README.md
          echo "" >> README.md
          echo "### üöÄ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–µ–±-–ø–∞–Ω–µ–ª—å" >> README.md
          echo "–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–ª–µ–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–±–µ—Ä–µ—Ç –ª—É—á—à–∏–π —Å–µ—Ä–≤–µ—Ä." >> README.md
          echo "" >> README.md
          echo "<a href='https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/'>" >> README.md
          echo "  <img src='https://raw.githubusercontent.com/interactivetv/images/main/play_button.png' width='300' alt='–ó–ê–ü–£–°–¢–ò–¢–¨ –ü–õ–ï–ï–†' />" >> README.md
          echo "</a>" >> README.md
          echo "" >> README.md
          echo "> **INFO:** –ï—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è 2026 –≥–æ–¥–∞." >> README.md
          echo "" >> README.md
          echo "---" >> README.md
          echo "üìÇ [–†–µ–ª–∏–∑—ã](${{ github.server_url }}/${{ github.repository }}/releases) | üõ† [–ü–æ–¥–¥–µ—Ä–∂–∫–∞](${{ github.server_url }}/${{ github.repository }}/issues)" >> README.md

      - name: Commit and Push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add index.html README.md
          git commit -m "Build: Deploy Player Interface and update README" || exit 0
          git push origin main
